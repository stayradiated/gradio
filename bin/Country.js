// Generated by CoffeeScript 1.6.2
/**
 * @fileOverview Scrapes the GrooveShark homepage HTML to get the Country ID.
*
*/


(function() {
  var Country, http, promise,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  http = require('http');

  promise = require('when');

  Country = (function() {
    function Country(core) {
      this.core = core;
      this.fetch = __bind(this.fetch, this);
    }

    Country.prototype.fetch = function() {
      var deferred;

      deferred = promise.defer();
      ({
        options: {
          hostname: this.core.homeurl,
          path: '/',
          method: 'GET',
          headers: {
            'Referer': this.core.htmlReferer,
            'User-Agent': this.core.userAgent
          }
        }
      });
      http.request(options, function(res) {
        console.log(res.body);
        return deferred.resolve();
      });
      return deferred.promise;
    };

    return Country;

  })();

  module.exports = Country;

}).call(this);
